function getadress(a){$(".container").hide(),$(".load").show();var b="https://t5.haotown.cn/ip/api/";a&&(b+="?ip="+a),$.ajax({url:b,success:function(b){var d,c=b;c.content?($(".load").hide(),$(".from").html("来自:"+c.content.formatted_address),$(".height-adress").html(c.content.location_description),lat=c.content.location.lat,lng=c.content.location.lng,$(".coordinates").html("纬度："+c.content.location.lat+"<br>维度"+c.content.location.lng),$(".container").show(),$(".height").show()):(d="https://t5.haotown.cn/ip/api/2.php",a&&(d+="?ip="+a),$.ajax({type:"get",url:d,success:function(a){0==a.code?$(".from").html("来自:"+a.data.country+a.data.area+a.data.region+a.data.city+a.data.isp):$(".from").html("没有查询到此IP"),$(".load").hide(),$(".height").hide(),$(".container").show()}}))}})}var lat,lng;$(document).ready(function(){getadress(),$(".select").click(function(){var a,b,c;a=$("#ip").val(),b=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,c=a.match(b),null==c?alert("IP地址不合法！"):(getadress(a),$(".ip").html("你查询的IP地址是:"+a))}),$(".map-close").click(function(){$(".map").hide()}),$(".lookmap").click(function(){$(".map").show(),$(".map-warp").html('<iframe class="map-main" src="map.html?lat='+lat+"&lng="+lng+'" width="" height=""></iframe>')})});